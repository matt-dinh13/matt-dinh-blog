# Conversation Backup: Matt Dinh Blog Project

## Project Context
- **Project:** Bilingual (EN/VI) blog using Next.js and Supabase
- **Main goals:** High-contrast, accessible UI; maintainable and robust code; bilingual support

## Key Decisions & Changes

### Homepage
- Title updated to "Problem Creator"
- Subtitle updated with Vietnamese and English translation
- Both languages supported via context/provider

### Code Refactor & Optimization
- Extracted reusable components: BlogPostCard, HeroSection, LoadingSpinner, LoadMoreButton
- Centralized utility functions
- Improved state management
- Updated Navigation and LanguageProvider for performance
- Documented changes in OPTIMIZATION_REPORT.md

### Article & Text Color
- BlogPostCard and BlogCard updated to use a shared, dark, high-contrast color (`oklch(21% .034 264.665)`) for titles
- Color is now a constant in `src/components/constants.ts` for maintainability

### Reading Time Feature
- Utility functions for reading time calculation and formatting
- `ReadingTime` component with icon and high-contrast styling
- Displayed under article header on blog detail pages, language-aware

### Navigation Hover Effect
- Navigation items now use a 2px transparent border by default
- On hover, border color changes (blue in light mode, blue-400 in dark mode), background remains transparent
- No shifting or resizing on hover
- Border and color styles are shared constants for easy refactoring

### Dashboard Quick Action Buttons
- Updated quick action buttons to use the same border-only hover effect as the navigation bar
- Always have a 2px transparent border, with border color changing on hover (blue in light mode, blue-400 in dark mode)
- No background fill on hover, text remains high-contrast
- Border and hover styles are defined as shared constants for easy refactoring and consistency

### Admin Sidebar (Collapsible/Expandable)
- Added a collapsible/expandable sidebar for the admin layout
- Sidebar can be toggled between expanded (full width, icons + labels) and collapsed (narrow, icons only)
- Toggle button is visible on desktop; state is managed with React useState
- Shared constants are used for sidebar width and transition for maintainability
- Tooltips are provided for icons when collapsed
- Designed to be robust against future refactors

## General Principles
- All style and logic constants are centralized for easy updates
- All UI changes are made with accessibility and maintainability in mind
- Refactoring will not break or reset key style decisions

## How to Use This Backup
- Use this file to recall design and code decisions
- Update this file with future major changes for ongoing documentation

---

## Sidebar Improvements v2 (Latest)
- Logo is only visible when the sidebar is expanded; hidden when collapsed to prevent compression or awkward spacing
- When collapsed, navigation icons display tooltips (tab names) on hover for clear navigation
- These changes are designed to be robust and persist through future refactors
- Previous sidebar improvements are preserved above for historical context

---

## Sidebar Improvements v3 (Persistence)
- Sidebar collapsed/expanded state is now persisted in localStorage
- When toggled, the state is saved and restored across page navigations and reloads
- Ensures user preference is maintained and robust to refactors
- Previous sidebar improvements are preserved above for historical context

---

*Generated by AI assistant, session backup for Matt Dinh Blog Project.* 

## [Context Update] Article Card Description Color Centralization (Sync & Maintainability)

- The color for article card description text is now centralized as `CARD_DESC_COLOR` in `src/components/constants.ts`.
- The color is set to a high-contrast value (oklch(38% 0.01 264.665)), which is 15% darker than the previous gray, for better readability in both light and dark modes.
- All components that render article cards (e.g., `BlogPostCard`, `BlogCard`) now use this constant for the description text color via the `style` prop.
- This ensures that any future color changes or refactors only require updating the constant, keeping all article cards visually consistent and easy to maintain. 

## [Context Update] Article Card Description Color Correction (Lighter for Readability)

- The `CARD_DESC_COLOR` constant was updated to a lighter shade (oklch(55% 0.02 264.665)) for better readability.
- The previous darker color was too harsh and difficult to read.
- This lighter color maintains good contrast while being easier on the eyes in both light and dark modes.
- All article card components automatically use this updated color since they reference the centralized constant. 

## [Context Update] Language Feature Overhaul (EN/VI, SEO, Admin, Consent)

- **URL Structure:** `/` redirects to `/vi`, `/vi` and `/en` are parallel, legacy URLs redirect to `/vi/...`.
- **Language Preference:** Default is Vietnamese, stored in a cookie for 1 year, set via language switcher.
- **Language Switcher:** Only on public pages, switches to same page if translation exists, otherwise to language homepage.
- **Content Visibility:** Only show posts/projects with a translation in the current language; direct access to missing translation shows a friendly message.
- **Publishing Workflow:** Drafts allowed in one language, "published" only if both EN and VI are present; warning near publish button if missing.
- **Admin Dashboard Filter:** Simple dropdown to filter posts missing EN, missing VI, or both.
- **SEO:** hreflang tags in `<head>`, dynamic meta title/description from content (first 150–160 chars, HTML stripped).
- **Cookie Consent Banner:** Simple banner with "OK" button, shown on first visit, persists in localStorage.
- **All changes are robust, maintainable, and match user’s detailed requirements and preferences.** 